# Story 1.6: Project Structure Reorganization

## Status: Pending

## Story

- As a Developer
- I want to reorganize the project structure by moving core application files to an `/app` folder
- so that the repository has clean separation between application code and project management files.

## Acceptance Criteria (ACs)

- AC 6.1: Given the current project structure with `index.html`, `assets/`, `lib/`, and `src/` at the repository root, when I reorganize the structure, then these files are moved to a new `/app` folder.
- AC 6.2: Given the files have been moved to `/app`, when I configure GitHub Pages deployment, then it points to the `/app` folder as the source directory.
- AC 6.3: Given the new structure is in place, when I run the application locally or via GitHub Pages, then all functionality works identically to before the reorganization.
- AC 6.4: Given the reorganization is complete, when I update any configuration files (package.json, .gitignore, etc.), then they reflect the new `/app` folder structure.

## Tasks / Subtasks

- [ ] Task 1: Create `/app` folder structure (AC: 6.1)
  - [ ] Subtask 1.1: Create `/app` directory in repository root
  - [ ] Subtask 1.2: Move `index.html` to `/app/index.html`
  - [ ] Subtask 1.3: Move `assets/` directory to `/app/assets/`
  - [ ] Subtask 1.4: Move `lib/` directory to `/app/lib/`
  - [ ] Subtask 1.5: Move `src/` directory to `/app/src/`
- [ ] Task 2: Update internal file references (AC: 6.3)
  - [ ] Subtask 2.1: Update import paths in all JavaScript modules to reflect new structure
  - [ ] Subtask 2.2: Update asset references in `index.html` and CSS files
  - [ ] Subtask 2.3: Update test file imports to reference new `/app/src/` paths
  - [ ] Subtask 2.4: Verify all module loading works correctly with new structure
- [ ] Task 3: Configure GitHub Pages deployment (AC: 6.2)
  - [ ] Subtask 3.1: Update GitHub Pages settings to serve from `/app` folder
  - [ ] Subtask 3.2: Test GitHub Pages deployment with new structure
  - [ ] Subtask 3.3: Verify all static assets load correctly from GitHub Pages
  - [ ] Subtask 3.4: Update any deployment documentation to reflect new configuration
- [ ] Task 4: Update configuration files (AC: 6.4)
  - [ ] Subtask 4.1: Update `package.json` scripts to reference `/app` folder where needed
  - [ ] Subtask 4.2: Update `.gitignore` patterns if necessary for new structure
  - [ ] Subtask 4.3: Update `vitest.config.js` to handle new test paths
  - [ ] Subtask 4.4: Update any linting configurations for new file locations
- [ ] Task 5: Verification and testing (AC: 6.3)
  - [ ] Subtask 5.1: Run full test suite to ensure all tests pass with new structure
  - [ ] Subtask 5.2: Test local development server functionality
  - [ ] Subtask 5.3: Test all media loading and playback features
  - [ ] Subtask 5.4: Verify persistence and state management still works correctly

## Dev Technical Guidance

### Context & Purpose

This story addresses the project structure reorganization identified during the Sprint Change course correction. The current structure has core application files at the repository root, which creates clutter and mixes application code with project management files. Moving to an `/app` folder provides clean separation and better organization.

### Implementation Notes

**Before Structure:**
```
./
├── index.html
├── assets/
├── lib/
├── src/
├── docs/
├── bmad-agent/
├── package.json
└── [other config files]
```

**After Structure:**
```
./
├── app/                     # Served by GitHub Pages
│   ├── index.html
│   ├── assets/
│   ├── lib/
│   └── src/
├── docs/
├── bmad-agent/
├── package.json
└── [other config files]
```

### Critical Considerations

1. **Import Path Updates:** All ES module imports must be updated to reflect new paths
2. **GitHub Pages Configuration:** Must be updated to serve from `/app` folder 
3. **Test Configuration:** Vitest and other tools need updated paths
4. **Asset References:** CSS and HTML asset references need updating
5. **Backward Compatibility:** Ensure no functionality is lost during reorganization

### Testing Strategy

- Verify all tests continue to pass
- Test local development workflow  
- Test GitHub Pages deployment
- Validate media loading and persistence features
- Check all module imports and asset loading

## Story Progress Notes

### Agent Model Used: [To be filled by implementing agent]

### Completion Notes

[To be filled during implementation]

## Story DoD Checklist Report

- [ ] **Functionality**: All ACs implemented and working
- [ ] **Code Quality**: Follows project coding standards  
- [ ] **Testing**: All existing tests pass with new structure
- [ ] **Error Handling**: No broken imports or asset references
- [ ] **Documentation**: README and config files updated for new structure
- [ ] **Integration**: GitHub Pages deployment configured and tested
- [ ] **Performance**: No impact on application load time or functionality 